!function($,t){function n(t,n,i){var o;return function(){var e=this,a=arguments,l=function(){o=null,i||t.apply(e,a)},r=i&&!o;clearTimeout(o),o=setTimeout(l,n),r&&t.apply(e,a)}}function i(){if(!window.postFetching&&!window.postEnd&&f.visible(!0)){var t=d.find(".article");t.length===a.postCount&&(window.postEnd=!0);for(var n=t.last(),i=n.data("article"),o=i.id-1,e,l=r.length-1;l>=0;l--)r[l].id===o&&(e=c+r[l].address+".html");$.ajax({url:e,type:"GET",dataType:"html",beforeSend:function(){window.postFetching=!0}}).done(function(t){n.after(function(){return t?$(t).find("#main").html():void 0}),Prism.highlightAll()}).always(function(){window.postFetching=!1})}}function o(){var t=d.find(".article");t.each(function(t){var n=$(this),i=n.data("article").id,o=i-1;console.log(i,o);var e=Math.floor(this.offsetTop-s.scrollTop());if(!(e>h)){var a=Math.floor(-1*(this.clientHeight-1.4*h)),l=c+r[o].address+".html";e>a&&window.location.href!==l&&History.pushState(null,r[o].title,l)}})}if(!History.enabled)return!1;var e=function u(){},a=window.SiteAPI,l=a.postCount,r=a.posts,c=window.location;c=c.protocol+"//"+c.host+"/";var s=$(window),d=$("#main"),f=$("#footer"),h=Math.ceil(.4*window.innerHeight);i(),s.on("scroll",n(function(){i(),o()},100))}(jQuery);
//# sourceMappingURL=./script.pkg.js.map